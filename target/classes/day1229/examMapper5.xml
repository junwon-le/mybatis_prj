<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="day1229">

	<!--	subquery & join
	 제조국이 국산인 차량의 제조국 , 제조사, 모델명, 년식, 가격, 이미지 ,입력일 검색
	 가장 마지막에 입력된 차량 부터 10건 -->
	 <select id="subNjoin" resultType="cmoDomain">
	 	select country,maker,model,car_year,price,cc,car_img,input_date
	 	from
	 	(select  cc.country, cc.maker,
        cma.model,
        cmo.car_year, cmo.price, cmo.cc, cmo.car_img, cmo.input_date,
        row_number() over(order by cmo.input_date desc) rnum
		from    car_model cmo, car_maker cma, car_country cc
		where cma.maker=cc.maker and cmo.model=cma.model and (cc.country = '국산'))
		where rnum between 1 and 10
	
	 </select>
	 
	 <!-- $의 사용 
	 테이블 명을 입력 받아서 검색 -->
	 <select id="dollar" parameterType="String" resultType="eaDomain">
		 select  empno, job, sal, hiredate , deptno from ${tableName}
	 </select>
	 <!-- 부서번호가 0이 아니면 해당 부서를 조회하고 그렇지 않으면모든 사원 정보 조회 -->
	 <select id="if" parameterType="int" resultType="eaDomain">
	 	select  empno, job, sal, hiredate , deptno 
	 	from emp
	 	<where>
	 		<if test="deptno neq 0">
				deptno = #{deptno}	 		
	 		</if>
	 	</where>
	 </select>
	  </mapper>